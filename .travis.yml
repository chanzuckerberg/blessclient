language: go
go_import_path: github.com/chanzuckerberg/blessclient
sudo: false
env:
  - CGO_ENABLED=1
matrix:
  include:
    - os: linux
      stage: test
      go: 1.12.x
      script:
        - make test
        - bash <(curl -s https://codecov.io/bash)
    - os: osx
      stage: test
      go: 1.12.x
      script:
        - make test
    - os: linux
      stage: test
      go: 1.12.x
      script:
        - npm install -g snyk
        - bash _bin/snyk.sh
    - os: linux
      stage: test
      sudo: true
      go: 1.12.x
      script:
        - make setup
        - make lint
    # - os: osx
    # stage: release
    # go: 1.12.x
    # script:
    # -
