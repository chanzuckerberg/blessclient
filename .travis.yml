language: go
go_import_path: github.com/chanzuckerberg/blessclient
sudo: false
install:
  - npm install -g snyk
  - make setup
matrix:
  include:
    - os: linux
      stage: test
      go: 1.12.x
      script:
        - make test
        - bash <(curl -s https://codecov.io/bash)
    - os: osx
      stage: test
      go: 1.12.x
      script:
        - make test
        - bash <(curl -s https://codecov.io/bash)
    - os: linux
      stage: test
      go: 1.12.x
      script:
        - bash _bin/snyk.sh
    - os: linux
      stage: test
      go: 1.12.x
      script:
        - make lint
